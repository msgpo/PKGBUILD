# Maintainer: Vlad Zagorodniy <vladzzag@gmail.com>
pkgname=code
pkgver=1.25.1
pkgrel=1
pkgdesc="Code Editing. Redefined."
arch=('x86_64')
url="https://code.visualstudio.com/"
license=('custom: commercial')
depends=(alsa-lib cairo fontconfig libxtst gcc-libs gconf gtk2 gvfs libnotify libxss nss python)
source=("$pkgname-$pkgver.tar.gz"::"https://vscode-update.azurewebsites.net/$pkgver/linux-x64/stable"
        code.desktop)
sha256sums=('5856bbebf38aa05d584da4722869bbe507cf123f69f7ffab5f1532d73dbf3438'
            'e1ea660686fdd3add7dd2d5d707c860fb3324d8d4abcf5a5a4fbaf06abe41da8')

package() {
    install -Dm644 "$srcdir/VSCode-linux-x64/resources/app/LICENSE.txt" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
    install -Dm644 "$srcdir/VSCode-linux-x64/resources/app/resources/linux/code.png" "$pkgdir/usr/share/icons/$pkgname.png"
    install -Dm644 "$srcdir/$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"

    install -d "$pkgdir/usr/lib"
    cp -pr "$srcdir/VSCode-linux-x64" "$pkgdir/usr/lib/$pkgname"

    install -d "$pkgdir/usr/bin"
    ln -s "/usr/lib/$pkgname/bin/code" "$pkgdir/usr/bin/code"
}
